{"version":3,"sources":["../../js/obfuscate-preact.js"],"names":["h","render","useState","Obfuscate","props","element","children","tel","sms","facetime","email","href","headers","obfuscate","obfuscateChildren","linkText","style","onClick","others","humanInteraction","setHumanInteraction","linkProps","Component","generateLink","link","combineHeaders","params","Object","keys","map","key","encodeURIComponent","join","handleClick","window","location","reverse","content","split","replace","obfuscatedStyle","unicodeBidi","direction","renderedLink","clickProps","defaultProps","undefined"],"mappings":"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","sourcesContent":["import { h, render } from 'https://cdn.skypack.dev/preact';\nimport { useState } from 'https://cdn.skypack.dev/preact/hooks';\n\n/** @jsx h */\nconst Obfuscate = (props) => {\n  const {\n    element,\n    children,\n    tel,\n    sms,\n    facetime,\n    email,\n    href,\n    headers,\n    obfuscate,\n    obfuscateChildren,\n    linkText,\n    style,\n    onClick,\n    ...others\n  } = props;\n\n  const [humanInteraction, setHumanInteraction] = useState(false);\n  const linkProps = children || tel || sms || facetime || email || href;\n  const Component = element;\n\n  const generateLink = () => {\n    let link;\n\n    // Combine email header parameters for use with email\n    const combineHeaders = (params) => {\n      return Object.keys(params)\n        .map((key) => `${key}=${encodeURIComponent(params[key])}`)\n        .join('&');\n    };\n\n    if (email) {\n      link = `mailto:${email}`;\n\n      if (headers) {\n        link += `?${combineHeaders(headers)}`;\n      }\n    } else if (tel) {\n      link = `tel:${tel}`;\n    } else if (sms) {\n      link = `sms:${sms}`;\n    } else if (facetime) {\n      link = `facetime:${facetime}`;\n    } else if (href) {\n      link = href;\n    } else if (typeof children !== 'object') {\n      link = children;\n    } else {\n      return '';\n    }\n\n    return link;\n  };\n\n  const handleClick = () => {\n    // Allow instantiator to provide an onClick method to be called\n    // before we change location (e.g. for analytics tracking)\n    if (onClick && typeof onClick === 'function') {\n      onClick();\n    }\n\n    // If focused or hovered, this js will be skipped with preference for html\n    if (humanInteraction === false) {\n      window.location.href = generateLink({\n        email,\n        headers,\n        tel,\n        sms,\n        facetime,\n        href,\n        children,\n      });\n    }\n  };\n\n  const reverse = (content) =>\n    typeof content !== 'undefined' &&\n    content.split('').reverse().join('').replace('(', ')').replace(')', '(');\n\n  const obfuscatedStyle = {\n    ...style,\n    unicodeBidi: 'bidi-override',\n    direction:\n      humanInteraction === true ||\n      obfuscate === false ||\n      obfuscateChildren === false\n        ? 'ltr'\n        : 'rtl',\n  };\n\n  const renderedLink =\n    humanInteraction === true ||\n    obfuscate === false ||\n    typeof children === 'object' ||\n    obfuscateChildren === false // Allow child elements\n      ? linkProps\n      : reverse(linkProps);\n\n  const clickProps =\n    Component === 'a'\n      ? {\n          href:\n            humanInteraction === true || obfuscate === false\n              ? generateLink()\n              : linkText || 'obfuscated',\n          onClick: handleClick,\n        }\n      : {};\n\n  return (\n    <Component\n      onFocus={() => setHumanInteraction(true)}\n      onMouseOver={() => setHumanInteraction(true)}\n      onContextMenu={() => setHumanInteraction(true)}\n      {...others}\n      {...clickProps}\n      style={obfuscatedStyle}\n    >\n      {renderedLink}\n    </Component>\n  );\n};\n\n// Obfuscate.propTypes = {\n//   element: T.string,\n//   children: T.node,\n//   tel: T.string,\n//   sms: T.string,\n//   facetime: T.string,\n//   email: T.string,\n//   href: T.string,\n//   headers: T.shape({}),\n//   obfuscate: T.bool,\n//   obfuscateChildren: T.bool,\n//   linkText: T.string,\n//   style: T.shape({}),\n//   onClick: T.func,\n// };\n\nObfuscate.defaultProps = {\n  element: 'a',\n  children: undefined,\n  tel: undefined,\n  sms: undefined,\n  facetime: undefined,\n  email: undefined,\n  href: undefined,\n  headers: undefined,\n  obfuscate: undefined,\n  obfuscateChildren: undefined,\n  linkText: undefined,\n  style: {},\n  onClick: undefined,\n};\n\nexport {Obfuscate};"],"file":"obfuscator-preact-compiled.js"}